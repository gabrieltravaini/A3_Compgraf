import { getColorIterator } from "./utils/colors/color.js"
import sample from "./examples/widget00.js"


function image_set(key) {
    return key.next() % 5
}

function getposx(x) {
    return 100 + (50 * x)
}

function getposy(y) {
    return 100 + (50 * y)
}

function getposition(x, y) {
    return [getposx(x), getposy(y)]
}

function widget(key, draw) {
    
    let nextColor = getColorIterator(key)
    let imagemap = []
    // Initialize color palette AFTER defining nextColor
    let colors = []
    for (let i = 0; i < 10; i++) {
        colors.push(nextColor())
    }

    let image = image_set(key)

    if (image==0){  //pagina em branco
        imagemap = [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,1,0,0,0,0,0,2,0,0,1,0,0,0,0],
        [0,0,1,0,0,0,0,0,2,0,0,0,1,0,0,0],
        [0,0,1,0,0,3,0,0,2,0,0,0,1,0,0,0],
        [0,0,1,0,0,3,0,0,2,2,2,2,1,0,0,0],
        [0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0],
        [0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0],
        [0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0],
        [0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0],
        [0,0,1,0,0,0,3,3,3,0,0,0,1,0,0,0],
        [0,0,1,0,0,3,0,0,0,3,0,0,1,0,0,0],
        [0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0],
        [0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0],
        [0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]
    }
    else if (image==1){ //burguer
        imagemap = [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0],
        [0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
        [0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0],
        [0,0,2,3,3,3,3,3,3,3,3,3,3,2,0,0],
        [0,0,3,4,4,4,4,4,4,4,4,4,4,3,0,0],
        [0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
        [0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
    ]
    }
    else if (image==2){ //escudo
        imagemap = [
        [1,2,0,0,0,0,0,0,0,0,0,0,0,0,2,1],
        [2,1,2,0,0,0,0,3,3,0,0,0,0,2,1,2],
        [0,2,3,3,0,0,3,3,3,3,0,0,3,3,2,0],
        [0,0,3,4,3,3,4,4,4,4,3,3,4,3,0,0],
        [0,0,3,4,4,4,4,4,4,4,4,4,4,3,0,0],
        [0,0,3,4,4,4,5,5,5,4,4,4,4,3,0,0],
        [0,0,3,4,4,4,5,4,4,5,4,4,4,3,0,0],
        [0,0,3,4,4,4,4,5,5,4,4,5,4,3,0,0],
        [0,0,3,4,5,4,4,5,4,4,5,4,4,3,0,0],
        [0,0,3,4,4,5,5,5,5,5,5,4,4,3,0,0],
        [0,0,3,4,4,4,4,5,5,4,4,5,4,3,0,0],
        [0,0,3,4,4,4,5,5,5,5,4,4,4,3,0,0],
        [0,0,2,3,4,4,5,4,5,5,4,4,3,2,0,0],
        [0,2,1,2,3,4,4,4,4,4,4,3,2,1,2,0],
        [2,1,2,0,0,3,3,3,3,3,3,0,0,2,1,2],
        [1,2,0,0,0,0,0,0,0,0,0,0,0,0,2,1]
        ]
    }
    else if (image==3){
        imagemap = [ //planeta
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,1,1,2,3,3,0,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,3,2,2,0,0,0,0],
        [0,0,0,0,1,1,1,1,1,2,2,2,2,0,0,0],
        [0,0,0,1,1,1,1,1,1,2,2,3,2,1,0,0],
        [0,0,3,3,1,1,1,1,2,1,2,2,2,2,1,0],
        [0,0,3,2,2,1,1,2,3,2,2,2,2,2,1,0],
        [0,0,3,2,3,2,1,1,1,1,1,3,2,3,3,0],
        [0,0,3,2,2,3,2,1,1,1,2,2,2,3,3,0],
        [0,0,3,3,2,2,2,1,1,3,3,2,3,2,3,0],
        [0,0,0,2,2,2,2,1,1,2,2,3,3,2,0,0],
        [0,0,0,0,2,2,2,1,2,3,2,2,2,0,0,0],
        [0,0,0,0,0,3,2,3,2,2,3,2,0,0,0,0],
        [0,0,0,0,0,0,3,3,2,3,3,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
    ]
    }
    else if (image==4){  //camera
        imagemap = [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
        [0,0,1,0,0,0,0,0,0,0,3,3,0,1,0,0],
        [0,0,1,0,0,0,0,2,2,0,0,0,0,1,0,0],
        [0,0,1,0,0,0,2,4,4,2,0,0,0,1,0,0],
        [0,0,1,0,0,0,2,4,4,2,0,0,0,1,0,0],
        [0,0,1,0,0,0,0,2,2,0,0,0,0,1,0,0],
        [0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0],
        [0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
    ]
    }

    
    draw.rect().size(900, 900).move(50, 50).fill(colors[0])
    for (let y = 0; y < imagemap.length; y++) {
        for (let x = 0; x < imagemap[y].length; x++) {
            let val = imagemap[y][x]
            if (val !== 0) {
                let [px, py] = getposition(x, y)
                draw.rect().size(50, 50).move(px, py).fill(colors[val])
            }
        }
    }

    
    
}

export default widget
